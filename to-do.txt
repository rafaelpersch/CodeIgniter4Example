- CRUD sample (Service, Transaction, Controller, views);
- .env
- filter (session)

- declare(strict_types=1);




index.php para listar os produtos.
create.php para criar novos produtos.
edit.php para editar produtos existentes.

$routes->get('produtos', 'Produtos::index');
$routes->get('produtos/create', 'Produtos::create');
$routes->post('produtos/store', 'Produtos::store');
$routes->get('produtos/edit/(:num)', 'Produtos::edit/$1');
$routes->post('produtos/update/(:num)', 'Produtos::update/$1');
$routes->get('produtos/delete/(:num)', 'Produtos::delete/$1');

create(): Exibe o formulário para criar um novo produto.
store(): Processa os dados do formulário de criação e insere um novo produto no banco de dados.
edit($id): Exibe o formulário de edição para um produto existente com base no ID.
update($id): Processa os dados do formulário de edição e atualiza o produto no banco de dados com base no ID.
delete($id): Exclui um produto do banco de dados com base no ID


$session->setFlashdata('item', 'value');
$session->getFlashdata('item');


public function index()
    {
        $model = new ProdutoModel();
        $data['produtos'] = $model->findAll();

        return view('produtos/index', $data);
    }

    public function create()
    {
        return view('produtos/create');
    }

    public function store()
    {
        $model = new ProdutoModel();

        $data = [
            'nome' => $this->request->getPost('nome'),
            'descricao' => $this->request->getPost('descricao'),
            'preco' => $this->request->getPost('preco'),
        ];

        $model->insert($data);

        return redirect()->to('/produtos');
    }

    public function edit($id = null)
    {
        $model = new ProdutoModel();
        $data['produto'] = $model->find($id);

        return view('produtos/edit', $data);
    }

    public function update($id = null)
    {
        $model = new ProdutoModel();

        $data = [
            'nome' => $this->request->getPost('nome'),
            'descricao' => $this->request->getPost('descricao'),
            'preco' => $this->request->getPost('preco'),
        ];

        $model->update($id, $data);

        return redirect()->to('/produtos');
    }

    public function delete($id = null)
    {
        $model = new ProdutoModel();
        $model->delete($id);

        return redirect()->to('/produtos');
    }

